<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LUV Edition 1</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <img src="assets/luv-logo.png" alt="LUV Logo" class="logo">
  <p class="edition">Edition 1. 22.01.26</p>
  <p class="hint">Swipe! It's better than Tinder.</p>
</header>

<div class="viewer-wrapper">
  <div class="viewer">
    <button class="nav-btn" onclick="prev()">←</button>
    <div class="main-image-container">
      <img id="viewerImage" src="" alt="photo" loading="lazy">
    </div>
    <button class="nav-btn" onclick="next()">→</button>
  </div>

  <div class="download-container">
    <a id="downloadBtn" href="" download class="download-btn">Download</a>
  </div>

  <div class="thumbnails" id="thumbnails"></div>
</div>

<script>
const baseName = "LUV_220126";
const customOrder = [
  25, 1, 14, 31, 34, 41, 43, 2, 7, 15, 42, 54, 61, 32, 48,
  55, 58, 65, 63, 4, 56, 64, 44, 11, 8, 13, 3, 5, 6, 9,
  10, 12, 16, 18, 62, 19, 17, 21, 22, 23, 24, 20, 27,
  26, 30, 28, 35, 29, 33, 37, 36, 38, 39, 40, 45, 46,
  47, 49, 50, 51, 52, 53, 59, 60, 57
];

const totalPhotos = customOrder.length;
const VISIBLE_THUMBS = 5;
let currentIndex = 0;

const img = document.getElementById("viewerImage");
const thumbsContainer = document.getElementById("thumbnails");
const downloadBtn = document.getElementById("downloadBtn");

function loadImage() {
  img.style.opacity = 0;

  setTimeout(() => {
    const photoNumber = customOrder[currentIndex];
    const fullPath = `photos/full/${baseName} (${photoNumber}).jpg`;
    img.src = fullPath;
    img.style.opacity = 1;

    downloadBtn.href = fullPath;
    downloadBtn.download = `${baseName} (${photoNumber}).jpg`;
  }, 100);

  updateThumbnails();
}

function next() {
  if (currentIndex < totalPhotos - 1) {
    currentIndex++;
    loadImage();
  }
}

function prev() {
  if (currentIndex > 0) {
    currentIndex--;
    loadImage();
  }
}

function updateThumbnails() {
  thumbsContainer.innerHTML = '';

  const half = Math.floor(VISIBLE_THUMBS / 2);
  let start = Math.max(0, currentIndex - half);
  let end = Math.min(totalPhotos - 1, start + VISIBLE_THUMBS - 1);

  if (end - start < VISIBLE_THUMBS - 1) {
    start = Math.max(0, end - VISIBLE_THUMBS + 1);
  }

  for (let i = start; i <= end; i++) {
    const thumbNumber = customOrder[i];
    const thumb = document.createElement('img');

    thumb.src = `photos/thumbs/${baseName} (${thumbNumber}).jpg`;
    thumb.className = 'thumbnail';
    thumb.loading = 'lazy';

    if (i === currentIndex) thumb.classList.add('active');

    thumb.onclick = () => {
      currentIndex = i;
      loadImage();
    };

    thumbsContainer.appendChild(thumb);
  }
}

/* Mobile swipe */
let touchStartX = 0;
let touchEndX = 0;

document.querySelector('.viewer-wrapper').addEventListener('touchstart', e => {
  touchStartX = e.changedTouches[0].screenX;
});

document.querySelector('.viewer-wrapper').addEventListener('touchend', e => {
  touchEndX = e.changedTouches[0].screenX;
  if (touchEndX < touchStartX - 50) next();
  if (touchEndX > touchStartX + 50) prev();
});

loadImage();
</script>

</body>
</html>
